{"ast":null,"code":"import _objectSpread from \"/Users/king/playground/meetup-analyzer/node_modules/@babel/runtime/helpers/esm/objectSpread\";\nimport moment from \"moment\";\nvar defaultAttendedMarker = \"Y\";\n\nvar attendedMeetup = function attendedMeetup(user) {\n  return user.Attendance === defaultAttendedMarker ? true : false;\n};\n\nvar didRSVP = function didRSVP(user) {\n  return user.RSVP === \"Yes\" ? true : false;\n};\n\nexport var bindRawMeetupData = function bindRawMeetupData(meetupData) {\n  return meetupData.map(function (user) {\n    return {\n      userId: user[\"User ID\"] !== \"\" ? user[\"User ID\"].replace(\"user \", \"\") : null,\n      didAttend: attendedMeetup(user),\n      didRSVP: didRSVP(user),\n      title: user.Title,\n      eventHost: user[\"Event Host\"],\n      rsvpDate: user[\"RSVPed on\"] !== \"\" ? new Date(user[\"RSVPed on\"]) : null,\n      dateJoinedGroup: new Date(user[\"Joined Group on\"])\n    };\n  });\n};\nvar eventDate = new Date(\"03/27/2019\");\n\nvar getRelativeRegistrationDate = function getRelativeRegistrationDate(acc, attendee) {\n  var rsvpDate = attendee.rsvpDate;\n\n  if (!rsvpDate) {\n    return acc.meetupGroupRegistration;\n  }\n\n  if (moment(rsvpDate).isSame(eventDate, \"day\")) {\n    return _objectSpread({}, acc.meetupGroupRegistration, {\n      onDayOfEventSignup: acc.meetupGroupRegistration.onDayOfEventSignup += 1\n    });\n  } //   console.log(\"eventDate\", moment(eventDate));\n  //   console.log(\"eventDate -\", moment(eventDate).subtract(30, \"days\"));\n\n\n  if (moment(rsvpDate).isBetween(moment(eventDate), moment(eventDate).subtract(30, \"days\"))) {\n    return _objectSpread({}, acc.meetupGroupRegistration, {\n      pastThirtyDays: acc.meetupGroupRegistration.pastThirtyDays += 1\n    });\n  }\n\n  if (moment(rsvpDate).isBetween(moment(eventDate), moment(eventDate).subtract(180, \"days\"))) {\n    return _objectSpread({}, acc.meetupGroupRegistration, {\n      pastThirtyDays: acc.meetupGroupRegistration.pastThirtyDays += 1\n    });\n  }\n\n  return acc.meetupGroupRegistration;\n};\n\nvar getmeetupGroupRegistrationData = function getmeetupGroupRegistrationData(acc, currentAttendee) {\n  return getRelativeRegistrationDate(acc, currentAttendee);\n};\n\nexport var getSummaryData = function getSummaryData(attendees) {\n  return attendees.reduce(function (acc, currentAttendee) {\n    var didRSVP = currentAttendee.didRSVP,\n        didAttend = currentAttendee.didAttend;\n    return _objectSpread({}, acc, {\n      totalCount: acc.totalCount + 1,\n      numberRSVPs: acc.numberRSVPs + (didRSVP ? 1 : 0),\n      numberAttendees: didAttend ? acc.numberAttendees + 1 : acc.numberAttendees,\n      attendeesWhoRSVPd: didRSVP && didAttend ? acc.attendeesWhoRSVPd + 1 : acc.attendeesWhoRSVPd,\n      meetupGroupRegistration: getmeetupGroupRegistrationData(acc, currentAttendee)\n    });\n  }, {\n    totalCount: 0,\n    numberRSVPs: 0,\n    numberAttendees: 0,\n    attendeesWhoRSVPd: 0,\n    meetupGroupRegistration: {\n      onDayOfEventSignup: 0,\n      pastThirtyDays: 0\n    }\n  });\n};","map":{"version":3,"sources":["/Users/king/playground/meetup-analyzer/src/features/singleMeetingAnalysis/SingleMeetingAnalysisUtils.ts"],"names":["moment","defaultAttendedMarker","attendedMeetup","user","Attendance","didRSVP","RSVP","bindRawMeetupData","meetupData","map","userId","replace","didAttend","title","Title","eventHost","rsvpDate","Date","dateJoinedGroup","eventDate","getRelativeRegistrationDate","acc","attendee","meetupGroupRegistration","isSame","onDayOfEventSignup","isBetween","subtract","pastThirtyDays","getmeetupGroupRegistrationData","currentAttendee","getSummaryData","attendees","reduce","totalCount","numberRSVPs","numberAttendees","attendeesWhoRSVPd"],"mappings":"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","sourcesContent":["import moment from \"moment\";\n\ntype RawUserData = {\n  Name: string;\n  Attendance: string;\n  \"User ID\": string;\n  Title: string;\n  \"Event Host\": string;\n  RSVP: string;\n  Guests: string;\n  \"RSVPed on\": string;\n  \"Joined Group on\": string;\n  \"URL of Member Profile\": string;\n  Notes: string;\n};\n\ntype BindedAttendeeData = {\n  userId: string | null;\n  didAttend: boolean;\n  didRSVP: boolean;\n  title: string;\n  eventHost: string;\n  rsvpDate: Date | null;\n  dateJoinedGroup: Date | null;\n};\n\nconst defaultAttendedMarker = \"Y\";\n\nconst attendedMeetup = (user: RawUserData) => {\n  return user.Attendance === defaultAttendedMarker ? true : false;\n};\n\nconst didRSVP = (user: RawUserData) => {\n  return user.RSVP === \"Yes\" ? true : false;\n};\n\nexport const bindRawMeetupData = (\n  meetupData: RawUserData[]\n): BindedAttendeeData[] => {\n  return meetupData.map((user: RawUserData) => {\n    return {\n      userId:\n        user[\"User ID\"] !== \"\" ? user[\"User ID\"].replace(\"user \", \"\") : null,\n      didAttend: attendedMeetup(user),\n      didRSVP: didRSVP(user),\n      title: user.Title,\n      eventHost: user[\"Event Host\"],\n      rsvpDate: user[\"RSVPed on\"] !== \"\" ? new Date(user[\"RSVPed on\"]) : null,\n      dateJoinedGroup: new Date(user[\"Joined Group on\"])\n    };\n  });\n};\n\nconst eventDate = new Date(\"03/27/2019\");\n\ntype RelativeMeetupRegistrationDates = {\n  onDayOfEventSignup: number;\n  pastThirtyDays: number;\n  pastSixMonths: number;\n  pastYear: number;\n  pastTwoyears: number;\n  overThreeYearsAgo: number;\n};\n\nconst getRelativeRegistrationDate = (\n  acc: any,\n  attendee: BindedAttendeeData\n) => {\n  const { rsvpDate } = attendee;\n  if (!rsvpDate) {\n    return acc.meetupGroupRegistration;\n  }\n  if (moment(rsvpDate).isSame(eventDate, \"day\")) {\n    return {\n      ...acc.meetupGroupRegistration,\n      onDayOfEventSignup: acc.meetupGroupRegistration.onDayOfEventSignup += 1\n    };\n  }\n\n  //   console.log(\"eventDate\", moment(eventDate));\n  //   console.log(\"eventDate -\", moment(eventDate).subtract(30, \"days\"));\n  if (\n    moment(rsvpDate).isBetween(\n      moment(eventDate),\n      moment(eventDate).subtract(30, \"days\")\n    )\n  ) {\n    return {\n      ...acc.meetupGroupRegistration,\n      pastThirtyDays: acc.meetupGroupRegistration.pastThirtyDays += 1\n    };\n  }\n\n  if (\n    moment(rsvpDate).isBetween(\n      moment(eventDate),\n      moment(eventDate).subtract(180, \"days\")\n    )\n  ) {\n    return {\n      ...acc.meetupGroupRegistration,\n      pastThirtyDays: acc.meetupGroupRegistration.pastThirtyDays += 1\n    };\n  }\n  return acc.meetupGroupRegistration;\n};\n\nconst getmeetupGroupRegistrationData = (\n  acc: any,\n  currentAttendee: BindedAttendeeData\n): RelativeMeetupRegistrationDates => {\n  return getRelativeRegistrationDate(acc, currentAttendee);\n};\n\nexport const getSummaryData = (attendees: BindedAttendeeData[]) => {\n  return attendees.reduce(\n    (acc, currentAttendee) => {\n      const { didRSVP, didAttend } = currentAttendee;\n      return {\n        ...acc,\n        totalCount: acc.totalCount + 1,\n        numberRSVPs: acc.numberRSVPs + (didRSVP ? 1 : 0),\n        numberAttendees: didAttend\n          ? acc.numberAttendees + 1\n          : acc.numberAttendees,\n        attendeesWhoRSVPd:\n          didRSVP && didAttend\n            ? acc.attendeesWhoRSVPd + 1\n            : acc.attendeesWhoRSVPd,\n        meetupGroupRegistration: getmeetupGroupRegistrationData(\n          acc,\n          currentAttendee\n        )\n      };\n    },\n    {\n      totalCount: 0,\n      numberRSVPs: 0,\n      numberAttendees: 0,\n      attendeesWhoRSVPd: 0,\n      meetupGroupRegistration: { onDayOfEventSignup: 0, pastThirtyDays: 0 }\n    }\n  );\n};\n"]},"metadata":{},"sourceType":"module"}