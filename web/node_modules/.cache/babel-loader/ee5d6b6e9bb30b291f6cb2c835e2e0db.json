{"ast":null,"code":"import _objectSpread from \"/Users/king/playground/meetup-analyzer/node_modules/@babel/runtime/helpers/esm/objectSpread\";\nimport moment from \"moment\";\nvar defaultAttendedMarker = \"Y\";\n\nvar attendedMeetup = function attendedMeetup(user) {\n  return user.Attendance === defaultAttendedMarker ? true : false;\n};\n\nvar didRSVP = function didRSVP(user) {\n  return user.RSVP === \"Yes\" ? true : false;\n};\n\nexport var bindRawMeetupData = function bindRawMeetupData(meetupData) {\n  return meetupData.map(function (user) {\n    return {\n      userId: user[\"User ID\"] !== \"\" ? user[\"User ID\"].replace(\"user \", \"\") : null,\n      didAttend: attendedMeetup(user),\n      didRSVP: didRSVP(user),\n      title: user.Title,\n      eventHost: user[\"Event Host\"],\n      rsvpDate: user[\"RSVPed on\"] !== \"\" ? new Date(user[\"RSVPed on\"]) : null,\n      dateJoinedGroup: user[\"Joined Group on\"] ? new Date(user[\"Joined Group on\"]) : null\n    };\n  });\n};\nvar eventDate = new Date(\"03/27/2019\");\n\nvar getRelativeRegistrationDate = function getRelativeRegistrationDate(acc, attendee) {\n  var didAttend = attendee.didAttend,\n      dateJoinedGroup = attendee.dateJoinedGroup,\n      didRSVP = attendee.didRSVP;\n\n  if (!dateJoinedGroup) {\n    return acc;\n  }\n\n  if (moment(dateJoinedGroup).isBetween(moment(eventDate).subtract(30, \"days\"), moment(eventDate))) {\n    return _objectSpread({}, acc, {\n      pastThirtyDays: acc.pastThirtyDays += 1\n    });\n  }\n\n  if (moment(dateJoinedGroup).isBetween(moment(eventDate).subtract(180, \"days\"))) {\n    return _objectSpread({}, acc, {\n      pastYear: acc.pastSixMonths += 1\n    });\n  }\n\n  if (moment(dateJoinedGroup).isBetween(moment(eventDate).subtract(365, \"days\"), moment(eventDate))) {\n    return _objectSpread({}, acc, {\n      pastYear: acc.pastYear += 1\n    });\n  }\n\n  if (moment(dateJoinedGroup).isBetween(moment(eventDate).subtract(710, \"days\"), moment(eventDate))) {\n    return _objectSpread({}, acc, {\n      pastTwoYears: acc.pastTwoYears += 1\n    });\n  }\n\n  return _objectSpread({}, acc, {\n    overTwoYearsAgo: acc.overTwoYearsAgo += 1\n  });\n};\n\nvar isMeetupGroupMemberAttendee = function isMeetupGroupMemberAttendee(attendee) {\n  return attendee.didAttend && attendee.dateJoinedGroup && attendee.didRSVP;\n};\n\nexport var getMeetupMembersWhoAttendedSummary = function getMeetupMembersWhoAttendedSummary(attendees) {\n  return attendees.filter(function (attendee) {\n    return isMeetupGroupMemberAttendee(attendee);\n  }).reduce(function (acc, currentAttendee) {\n    return getRelativeRegistrationDate(acc, currentAttendee);\n  }, {\n    pastThirtyDays: 0,\n    pastSixMonths: 0,\n    pastYear: 0,\n    pastTwoYears: 0,\n    overTwoYearsAgo: 0\n  });\n};\nexport var getSummaryData = function getSummaryData(attendees) {\n  return attendees.reduce(function (acc, currentAttendee) {\n    var didRSVP = currentAttendee.didRSVP,\n        didAttend = currentAttendee.didAttend,\n        rsvpDate = currentAttendee.rsvpDate,\n        dateJoinedGroup = currentAttendee.dateJoinedGroup;\n    return _objectSpread({}, acc, {\n      totalCount: acc.totalCount + 1,\n      numberRSVPs: acc.numberRSVPs + (didRSVP ? 1 : 0),\n      numberAttendees: didAttend ? acc.numberAttendees + 1 : acc.numberAttendees,\n      attendeesWhoRSVPd: didRSVP && didAttend && dateJoinedGroup ? acc.attendeesWhoRSVPd + 1 : acc.attendeesWhoRSVPd,\n      attendeesWhoJoinedMeetupForEvent: acc.attendeesWhoJoinedMeetupForEvent + (rsvpDate && dateJoinedGroup && didAttend && moment(rsvpDate).isSame(dateJoinedGroup, \"day\") ? 1 : 0)\n    });\n  }, {\n    totalCount: 0,\n    numberRSVPs: 0,\n    numberAttendees: 0,\n    attendeesWhoRSVPd: 0,\n    attendeesWhoJoinedMeetupForEvent: 0\n  });\n};","map":{"version":3,"sources":["/Users/king/playground/meetup-analyzer/src/features/singleMeetingAnalysis/SingleMeetingAnalysisUtils.ts"],"names":["moment","defaultAttendedMarker","attendedMeetup","user","Attendance","didRSVP","RSVP","bindRawMeetupData","meetupData","map","userId","replace","didAttend","title","Title","eventHost","rsvpDate","Date","dateJoinedGroup","eventDate","getRelativeRegistrationDate","acc","attendee","isBetween","subtract","pastThirtyDays","pastYear","pastSixMonths","pastTwoYears","overTwoYearsAgo","isMeetupGroupMemberAttendee","getMeetupMembersWhoAttendedSummary","attendees","filter","reduce","currentAttendee","getSummaryData","totalCount","numberRSVPs","numberAttendees","attendeesWhoRSVPd","attendeesWhoJoinedMeetupForEvent","isSame"],"mappings":"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","sourcesContent":["import moment from \"moment\";\n\ntype RawUserData = {\n  Name: string;\n  Attendance: string;\n  \"User ID\": string;\n  Title: string;\n  \"Event Host\": string;\n  RSVP: string;\n  Guests: string;\n  \"RSVPed on\": string;\n  \"Joined Group on\": string;\n  \"URL of Member Profile\": string;\n  Notes: string;\n};\n\ntype AttendeeData = {\n  userId: string | null;\n  didAttend: boolean;\n  didRSVP: boolean;\n  title: string;\n  eventHost: string;\n  rsvpDate: Date | null;\n  dateJoinedGroup: Date | null;\n};\n\nconst defaultAttendedMarker = \"Y\";\n\nconst attendedMeetup = (user: RawUserData) => {\n  return user.Attendance === defaultAttendedMarker ? true : false;\n};\n\nconst didRSVP = (user: RawUserData) => {\n  return user.RSVP === \"Yes\" ? true : false;\n};\n\nexport const bindRawMeetupData = (\n  meetupData: RawUserData[]\n): AttendeeData[] => {\n  return meetupData.map((user: RawUserData) => {\n    return {\n      userId:\n        user[\"User ID\"] !== \"\" ? user[\"User ID\"].replace(\"user \", \"\") : null,\n      didAttend: attendedMeetup(user),\n      didRSVP: didRSVP(user),\n      title: user.Title,\n      eventHost: user[\"Event Host\"],\n      rsvpDate: user[\"RSVPed on\"] !== \"\" ? new Date(user[\"RSVPed on\"]) : null,\n      dateJoinedGroup: user[\"Joined Group on\"]\n        ? new Date(user[\"Joined Group on\"])\n        : null\n    };\n  });\n};\n\nconst eventDate = new Date(\"03/27/2019\");\n\ntype RelativeMeetupRegistrationDates = {\n  pastThirtyDays: number;\n  pastSixMonths: number;\n  pastYear: number;\n  pastTwoYears: number;\n  overTwoYearsAgo: number;\n};\n\nconst getRelativeRegistrationDate = (\n  acc: RelativeMeetupRegistrationDates,\n  attendee: AttendeeData\n) => {\n  const { didAttend, dateJoinedGroup, didRSVP } = attendee;\n  if (!dateJoinedGroup) {\n    return acc;\n  }\n\n  if (\n    moment(dateJoinedGroup).isBetween(\n      moment(eventDate).subtract(30, \"days\"),\n      moment(eventDate)\n    )\n  ) {\n    return {\n      ...acc,\n      pastThirtyDays: acc.pastThirtyDays += 1\n    };\n  }\n\n  if (\n    moment(dateJoinedGroup).isBetween(moment(eventDate).subtract(180, \"days\"))\n  ) {\n    return {\n      ...acc,\n      pastYear: acc.pastSixMonths += 1\n    };\n  }\n\n  if (\n    moment(dateJoinedGroup).isBetween(\n      moment(eventDate).subtract(365, \"days\"),\n      moment(eventDate)\n    )\n  ) {\n    return {\n      ...acc,\n      pastYear: acc.pastYear += 1\n    };\n  }\n\n  if (\n    moment(dateJoinedGroup).isBetween(\n      moment(eventDate).subtract(710, \"days\"),\n      moment(eventDate)\n    )\n  ) {\n    return {\n      ...acc,\n      pastTwoYears: acc.pastTwoYears += 1\n    };\n  }\n\n  return {\n    ...acc,\n    overTwoYearsAgo: acc.overTwoYearsAgo += 1\n  };\n};\n\nconst isMeetupGroupMemberAttendee = (attendee: AttendeeData) => {\n  return attendee.didAttend && attendee.dateJoinedGroup && attendee.didRSVP;\n};\n\nexport const getMeetupMembersWhoAttendedSummary = (\n  attendees: AttendeeData[]\n): RelativeMeetupRegistrationDates => {\n  return attendees\n    .filter(attendee => isMeetupGroupMemberAttendee(attendee))\n    .reduce(\n      (acc, currentAttendee) => {\n        return getRelativeRegistrationDate(acc, currentAttendee);\n      },\n      {\n        pastThirtyDays: 0,\n        pastSixMonths: 0,\n        pastYear: 0,\n        pastTwoYears: 0,\n        overTwoYearsAgo: 0\n      }\n    );\n};\n\nexport const getSummaryData = (attendees: AttendeeData[]) => {\n  return attendees.reduce(\n    (acc, currentAttendee) => {\n      const { didRSVP, didAttend, rsvpDate, dateJoinedGroup } = currentAttendee;\n\n      return {\n        ...acc,\n        totalCount: acc.totalCount + 1,\n        numberRSVPs: acc.numberRSVPs + (didRSVP ? 1 : 0),\n        numberAttendees: didAttend\n          ? acc.numberAttendees + 1\n          : acc.numberAttendees,\n        attendeesWhoRSVPd:\n          didRSVP && didAttend && dateJoinedGroup\n            ? acc.attendeesWhoRSVPd + 1\n            : acc.attendeesWhoRSVPd,\n        attendeesWhoJoinedMeetupForEvent:\n          acc.attendeesWhoJoinedMeetupForEvent +\n          (rsvpDate &&\n          dateJoinedGroup &&\n          didAttend &&\n          moment(rsvpDate).isSame(dateJoinedGroup, \"day\")\n            ? 1\n            : 0)\n      };\n    },\n    {\n      totalCount: 0,\n      numberRSVPs: 0,\n      numberAttendees: 0,\n      attendeesWhoRSVPd: 0,\n      attendeesWhoJoinedMeetupForEvent: 0\n    }\n  );\n};\n"]},"metadata":{},"sourceType":"module"}